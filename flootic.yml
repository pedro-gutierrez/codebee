entities:
  - name: Organization
    traits:
      - keys
      - owner
    relations:
      - entity: Address
        modifiers:
          - hasOne
  - name: User
    traits:
      - id
    attributes:
      - name: Email
        type: String
        modifiers:
          - unique
          - required
          - indexed
    relations:
      - entity: Address
        modifiers:
          - hasOne
  - name: Membership
    traits:
      - id
    relations:
      - entity: User
        alias: Member
        modifiers:
          - hasOne
      - entity: Organization
        modifiers:
          - hasOne
  - name: Credentials
    traits:
      - id
      - owner
    attributes:
      - name: Username
        type: String
        modifiers:
          - unique
          - required
          - indexed
      - name: Password
        type: String
        modifiers:
          - hashed
  - name: Token
    traits:
      - id
      - owner
    attributes:
      - name: Expires
        type: Int
      - name: Permissions
        type: String
  - name: Address
    traits:
      - id
    attributes:
      - name: Line1
        type: String
      - name: Line2
        type: String
      - name: City
        type: String
      - name: Zip
        type: String
      - name: Country
        type: String
  - name: Command
    traits:
      - keys
    attributes:
      - name: Type
        type: CommandType
  - name: Poi
    traits:
      - keys
      - owner
  - name: Vehicle
    traits:
      - id
    attributes:
      - name: plate
        type: String
    relations:
      - entity: Organization
        modifiers:
          - belongsTo
  - name: Brand
    traits:
      - keys
  - name: Model
    traits:
      - keys
    attributes:
      - name: Status
        type: ModelStatus
        modifiers:
          - indexed
    relations:
      - entity: Organization
        alias: Manufacturer
        modifiers:
          - hasOne
      - entity: Organization
        alias: Provider
        modifiers:
          - hasOne
  - name: Device
    traits:
      - keys
      - owner
    attributes:
      - name: Serial
        type: String
        modifiers:
          - unique
          - indexed
    relations:
      - entity: Model
        modifiers:
          - belongsTo
      - entity: Organization
        alias: Purchaser
        modifiers:
          - hasOne
      - entity: Vehicle
        modifiers:
          - hasOne
  - name: Sim
    traits:
      - id
    attributes:
      - name: Imei
        type: String
        modifiers:
          - indexed
          - unique
      - name: Phone
        type: String
        modifiers:
          - indexed
          - unique
      - name: Status
        type: SimStatus
        modifiers:
          - indexed
    relations:
      - entity: Device
        modifiers:
          - belongsTo
  - name: Sensor
    traits:
      - keys
    relations:
      - entity: Device
        modifiers:
          - belongsTo
types:
  - name: CommandType
    type: String
    values:
      - sms
      - gprs
  - name: Role
    type: String
    values:
      - superadmin
      - owner
      - supervisor
      - maintainer
      - viewer
      - demo
      - provider
  - name: Status
    type: String
    values:
      - active
      - disabled
  - name: IdentityStatus
    type: String
    values:
      - verified
      - unverified
      - banned
  - name: AlertType
    type: String
    values:
      - speec
      - zone
      - fuel
      - temperature
      - theft
      - crane
  - name: StockStatus
    type: String
    values:
      - inStock
      - outOfStock
  - name: ModelStatus
    type: Union
    values:
      - Status
      - StockStatus
  - name: SimStatus
    type: Union
    values:
      - Status
      - StockStatus
  - name: Speed
    type: String
    values:
      - kmh
      - mph
      - knt
      - fps
  - name: Lang
    type: String
    values:
      - en
      - es
